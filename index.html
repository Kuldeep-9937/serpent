<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Doodle Snake Game</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    #gameBoard {
      display: grid;
      grid-template-columns: repeat(20, 1fr);
      grid-template-rows: repeat(20, 1fr);
    }

    .cell {
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
      background-color: #a6ce39;
      font-size: clamp(12px, 2vw, 18px);
    }

    .cell:nth-child(odd):nth-child(even),
    .cell:nth-child(even):nth-child(odd) {
      background-color: #9ec835;
    }

    .snake {
      background-color: #4ade80;
    }

    .snake-head {
      background-color: #22c55e;
      font-weight: bold;
    }

    .food {
      background-color: #f87171;
    }
  </style>
</head>
<body class="bg-orange-50 text-gray-800 flex items-center justify-center min-h-screen flex-col gap-6 px-4 font-mono text-center">

  <h1 class="text-3xl md:text-4xl font-bold">üçè Doodle Snake Game üêç</h1>

  <div class="flex flex-wrap justify-center gap-4 items-center w-full max-w-md">
    <label class="text-lg">Difficulty:</label>
    <select id="difficulty" class="bg-white border border-gray-400 text-gray-800 p-2 rounded">
      <option value="200">Easy</option>
      <option value="100">Medium</option>
      <option value="50">Hard</option>
    </select>
    <button onclick="startGame()" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded shadow">Start</button>
  </div>

  <div class="w-full max-w-[480px] aspect-square border-2 border-gray-300 shadow-lg">
    <div id="gameBoard" class="w-full h-full">
      <!-- Grid dynamically created -->
    </div>
  </div>

  <div class="text-lg">Score: <span id="score">0</span></div>

  <script>
    const board = document.getElementById("gameBoard");
    const scoreDisplay = document.getElementById("score");
    let intervalId, speed;
    const boardSize = 20;
    const cells = [];
    let snake = [210, 209];
    let direction = 1;
    let food = 0;
    let score = 0;

    const emojiFood = ["üçé", "üçì", "üçí", "üçá", "üçä", "üçâ"];
    const emojiBody = "‚óè";
    const emojiHead = "üê≤";

    // Create board
    for (let i = 0; i < boardSize * boardSize; i++) {
      const cell = document.createElement("div");
      cell.classList.add("cell");
      cells.push(cell);
      board.appendChild(cell);
    }

    // Arrow key control
    document.addEventListener("keydown", (e) => {
      if (e.key === "ArrowUp" && direction !== boardSize) direction = -boardSize;
      else if (e.key === "ArrowDown" && direction !== -boardSize) direction = boardSize;
      else if (e.key === "ArrowLeft" && direction !== 1) direction = -1;
      else if (e.key === "ArrowRight" && direction !== -1) direction = 1;
    });

    function startGame() {
      clearInterval(intervalId);
      cells.forEach(cell => {
        cell.className = "cell";
        cell.textContent = "";
      });
      snake = [210, 209];
      direction = 1;
      score = 0;
      scoreDisplay.textContent = score;
      speed = parseInt(document.getElementById("difficulty").value);

      drawSnake();
      placeFood();
      intervalId = setInterval(move, speed);
    }

    function drawSnake() {
      snake.forEach((pos, i) => {
        const cell = cells[pos];
        cell.classList.add(i === 0 ? "snake-head" : "snake");
        cell.textContent = i === 0 ? emojiHead : emojiBody;
      });
    }

    function move() {
      const head = snake[0];
      const newHead = head + direction;

      if (
        newHead < 0 || newHead >= boardSize * boardSize ||
        (direction === 1 && head % boardSize === boardSize - 1) ||
        (direction === -1 && head % boardSize === 0) ||
        snake.includes(newHead)
      ) {
        clearInterval(intervalId);
        alert("üíÄ Game Over! Your score: " + score);
        return;
      }

      snake.unshift(newHead);

      if (newHead === food) {
        score++;
        scoreDisplay.textContent = score;
        placeFood();
      } else {
        const tail = snake.pop();
        cells[tail].className = "cell";
        cells[tail].textContent = "";
      }

      const headCell = cells[newHead];
      headCell.className = "cell snake-head";
      headCell.textContent = emojiHead;

      for (let i = 1; i < snake.length; i++) {
        const cell = cells[snake[i]];
        cell.className = "cell snake";
        cell.textContent = emojiBody;
      }
    }

    function placeFood() {
      do {
        food = Math.floor(Math.random() * boardSize * boardSize);
      } while (snake.includes(food));

      cells.forEach(cell => {
        if (cell.classList.contains("food")) {
          cell.className = "cell";
          cell.textContent = "";
        }
      });

      const foodCell = cells[food];
      foodCell.classList.add("food");
      foodCell.textContent = emojiFood[Math.floor(Math.random() * emojiFood.length)];
    }
  </script>

</body>
</html>
